<script>
  async function fillCategorySelect() {
    const sel = document.getElementById('category');
    sel.innerHTML = '<option value="">Categoria</option>';
    try {
      const api = window.API_URL || 'https://cibersec-news-api.onrender.com'; // sem barra no final
      const res = await fetch(api + '/meta/categories');
      const data = await res.json();
      (data.categories || []).forEach(c => {
        const opt = document.createElement('option');
        opt.value = c;
        opt.textContent = c;
        sel.appendChild(opt);
      });
    } catch (e) {
      console.error('Falha ao carregar categorias', e);
    }
  }
  document.addEventListener('DOMContentLoaded', fillCategorySelect);
</script>
