# Render Blueprint (Free tier) — API (web) + Frontend (static site) em formato "clássico"
# Este formato usa duas seções: `services:` para web/worker e `staticSites:` para sites estáticos.
# Após salvar, volte na Render e clique em "Refresh" e depois "Deploy Blueprint".

services:
  - type: web
    name: cibersec-news-api
    env: python
    plan: free
    buildCommand: pip install -r backend/requirements.txt
    startCommand: uvicorn backend.app:app --host 0.0.0.0 --port 10000
    runtime: python3
    autoDeploy: true
    envVars:
      - key: TZ
        value: America/Sao_Paulo
      - key: DB_URL
        value: sqlite:///cibersec.db

staticSites:
  - name: cibersec-news-front
    plan: free
    buildCommand: "echo 'Static build (no step)'"
    publishPath: frontend
    envVars:
      - key: API_URL
        value: https://cibersec-news-api.onrender.com   # depois do 1º deploy, troque para a URL real da sua API
      - key: LOGO_URL
        value: https://via.placeholder.com/220x60?text=HMW+Solucoes
    headers:
      - path: /*
        name: Cache-Control
        value: no-store
    redirects:
      # mantém SPA se evoluir o front
      - source: /*
        destination: /index.html
        status: 200
